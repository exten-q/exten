<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ExtenQ</title>
  <style id="dynamic-style"></style>
</head>
<body>
  <div id="app"></div>

  <script>
    // Fungsi encode base64 (untuk demo, nanti ini dari server atau manual saja)
    function b64EncodeUnicode(str) {
      return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, 
        function toSolidBytes(match, p1) {
          return String.fromCharCode('0x' + p1);
      }));
    }

    // Fungsi decode base64 ke string
    function b64DecodeUnicode(str) {
      return decodeURIComponent(atob(str).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
      }).join(''));
    }

    // HTML asli
    const htmlContentRaw = `
      <div class="absolute inset-0 flex items-center justify-center min-h-full w-full">
        <div class="container py-12 lg:py-16">
          <div class="max-w-4xl text-center mx-auto">
            <p class="mt-6 mb-3 font-semibold lg:text-2xl">Hello There.</p>
            <p class="mb-12 font-bold tracking-tight text-gray-900 text-4xl lg:text-5xl">
              I'm keebs Lovers.<br>I <span id="typing"></span> Keyboard mechanical
            </p>
            <a href="https://shopee.co.id/extenq" class="cta-button">Get in touch</a>
          </div>
        </div>
      </div>
    `;

    // CSS asli
    const cssContentRaw = `
      body { margin:0; padding:0; font-family:sans-serif; }
      .absolute { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; min-height:100vh; width:100%; }
      .container { padding-top:3rem; padding-bottom:4rem; }
      .max-w-4xl { max-width:56rem; margin-left:auto; margin-right:auto; text-align:center; }
      .mt-6 { margin-top:1.5rem; }
      .mb-3 { margin-bottom:0.75rem; }
      .mb-12 { margin-bottom:3rem; }
      .font-semibold { font-weight:600; }
      .font-bold { font-weight:550; }
      .text-center { text-align:center; }
      .tracking-tight { letter-spacing:-0.025em; }
      .text-gray-900 { color:#1a202c; }
      .cta-button {
        background-color:#6366f1;
        border-radius:9999px;
        margin-top:2rem;
        padding:0.75rem 2rem;
        font-weight:500;
        font-size:1.125rem;
        color:white;
        text-decoration:none;
        display:inline-block;
      }
      #typing {
        background: linear-gradient(to right, #fef08a 0%, #fef08a 100%);
        border-right: 2px solid #1a202c;
        padding-right: 4px;
        animation: blink-caret 0.75s step-end infinite;
        display: inline-block;
      }
      @keyframes blink-caret {
        from, to { border-color: transparent; }
        50% { border-color: #1a202c; }
      }
    `;

    // Encode ke base64 (di sini dilakukan secara langsung, tapi idealnya ini dilakukan server-side)
    const encodedHTML = b64EncodeUnicode(htmlContentRaw);
    const encodedCSS = b64EncodeUnicode(cssContentRaw);

    // Decode dan masukkan ke halaman
    const decodedHTML = b64DecodeUnicode(encodedHTML);
    const decodedCSS = b64DecodeUnicode(encodedCSS);

    document.getElementById('dynamic-style').textContent = decodedCSS;
    document.getElementById('app').innerHTML = decodedHTML;

    // Script typing effect
    const words = ['build', 'modify', 'repair'];
    let wordIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    const typingElement = document.getElementById('typing');

    function type() {
      const currentWord = words[wordIndex];
      const visibleText = currentWord.substring(0, charIndex);
      typingElement.textContent = visibleText;

      if (!isDeleting && charIndex < currentWord.length) {
        charIndex++;
        setTimeout(type, 100);
      } else if (isDeleting && charIndex > 0) {
        charIndex--;
        setTimeout(type, 50);
      } else {
        if (!isDeleting) {
          isDeleting = true;
          setTimeout(type, 1000);
        } else {
          isDeleting = false;
          wordIndex = (wordIndex + 1) % words.length;
          setTimeout(type, 300);
        }
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      type();
    });
  </script>
</body>
</html>
